<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j" template="/layout/template.xhtml">

	<ui:define name="center">
		<h:form id="requestRegistrationForm">
			<rich:panel id="requestRegistrationPanel">
				<f:facet name="header">
					<h:panelGroup>
						<h:outputText value="#{messages['registration.title']}" />
					</h:panelGroup>
				</f:facet>

				<s:decorate id="requesterNameDecoration"
					template="/layout/edit.xhtml">
					<ui:define name="label">#{messages['requester.name']}:</ui:define>
					<h:outputText id="requesterName"
						value="#{newRegistration.requester.name}" />
				</s:decorate>

				<s:decorate id="emailDecoration" template="/layout/edit.xhtml">
					<ui:define name="label">#{messages['registration.email']}:</ui:define>
					<h:inputText required="true" id="email"
						value="#{newRegistration.email}" />
				</s:decorate>

				<s:decorate id="certificateDomainDecoration"
					template="/layout/edit.xhtml">
					<ui:define name="label">#{messages['registration.certificate.domain']}:</ui:define>
					<h:selectManyCheckbox id="certificateDomainList" 
				 			value="#{registrationHandler.selectedCertificateDomains}">
                    	<s:selectItems value="#{certificateDomainRepository.findUnregistered(newRegistration.requester)}"
                        		var="certificateDomain" label="#{certificateDomain.name}"/>
                       	<s:convertEntity />
                	</h:selectManyCheckbox>
				</s:decorate>

				<s:decorate template="/layout/buttonbox.xhtml" id="requestRegistrationButtonBox">
					<h:commandButton
						action="#{registrationHandler.createRegistrations}"
						value="#{messages['button.register']}" id="register" />
					<s:button value="#{messages['button.cancel']}"
						action="registration" id="cancel" />
				</s:decorate>
			</rich:panel>
		</h:form>
	</ui:define>
</ui:composition>
